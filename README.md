# React + Redux + Typescript Practice

각각의 라이브러리를 검토 후 적용을 결정하게된 결정적인 원인들

## 1. React

과거 브라우저 상에서 파일을 읽어 컴포넌트에 업데이트하는 구조를

직접 만든 적이 있다. HTML을 작성해서 DOM구조를 만들고

각각의 UI 컴포넌트에 대한 CSS 작성한 후 DOM에 js 이벤트를 붙이는 형태이다.

그리고 엄청난 고생을 겪어야 했다.

각각 UI컴포넌트는 구조 상 상태를 보유하고 있었는데(디자인 포함)

내부 상태 전이를 js코드로 직접 다 작성하고 CSS는 해키한 방법으로 만드는 등

코드 구조가 매우 엉망진창이기 일쑤였다. 이러한 상태라이브러리를 만들기에는

시간이 많이 걸리며 이미 알려진 라이브러리가 있었고

그 땐 Pure한 js로 완성하면서 기술 습득을 목적으로 했었기
때문에 도입을 미뤘다.

이후 React를 쓰고나니 신세계가 펼쳐졌다.

1. React의 Virtual DOM

Browser에서 프로그램을 작성하면 고민해야하는 부분이 3가지인데

DOM render부분 / 비즈니스 로직 부분 / 이벤트 처리 부분 이다.

이 부분에서 DOM Render/이벤트 부분을 React가 사이다처럼 해결해준다.

각각의 Browser 사양/버전에 따라 DOM render과정이 조금씩 다르며 이벤트처리가

까다로운 부분이 있는데 Virtual DOM과 Event를 Synthetic하게 추상화 해서

보다 쉽게 사용할 수 있다.

2. JSX

어떤 로직에 따라선 문서의 element를 추가하거나 갱신해야하는 경우도 생긴다.

무한 스크롤링이나 Pagenation, Modal 등등 UI에선 무조건일 것이다.

이 때 코드를 보면 document.createElement가 추상화된 블라블라 코드가

엄청나게 떡칠되어있는 것을 볼 수 있다. 거기에 더해 js에서 디자인을

더하고싶을 땐 기존 코드스타일에 Jquery 스타일까지 합세해서 난잡한

코드를 생성하게 된다. 또 하나 더해서 각각 컴포넌트가 상태를 갖게 된다면

온갖 클로저와 상태전달을 위한 장황한 매개변수를 갖게 되는데

Ecmascript를 사용하는 문법이라면 그나마 덜한데 레거시 js코드라면

가독성과 성능 유지보수 모두 떨어지게 된다.

이 모든 것은 개인적인 의견으론 관심사의 분리가 부족해서라고 생각하는데

장황한 UI코드와 비즈니스 코드, 상태 코드를 번갈아서 보게되면 실수를

유발하는 지점이 있다.

JSX로 UI와 나머지 코드간의 관심사를 분리하면

가독성도 증가하는 것 뿐만하니라 react의 이점을 더욱 활용할 수 있게된다.

개인적으로 JSX의 XML같은 문법은 의식의 흐름을 중간에 한번 분리해주는데

매우 도움된다고 생각한다.

3. Hook를 조합한 Context API

바로 위에서 UI와 나머지 코드의 관심사 분리가 중요하다고 했었다.

이번엔 상태관리이다. 어떤 UI상태는 그 자체로 상태 변경하지만

다른 UI의 상태는 외부에 의존적일 수 있다. 또 외부의 상태가

한번에 UI 여러개를 변경시킨다면 어떨까?

이럴 때 Hooks와 Context API를 사용한다.

React hooks는 class없이 react의 상태를 관리하게 도와주는 함수이다.

> 여기서 class 컴포넌트와 function 컴포넌트를 다루기에는 또다른 문서를 작성해야하니 잠시 스킵.

React Context는 UI간의 매개변수(Props)없이 상태를 전달하게 도와주는 함수이다.

즉, 컴포넌트 자체의 상태만을 사용한다면 Hooks를 사용하고

전역의 상태를 사용한다면 Context를 사용한다.

또한 전역의 상태를 로컬한 상태처럼 쉽게 불러오고 싶다면 context와

hooks를 조합해서 쓴다.

## 2. Redux

Redux는 Reducer + flux의 줄임말이며

애플리케이션의 상태를 관리하기 위한 js 라이브러리다.

전역의 상태관리가 힘들어지면서 Reducer flux 패턴으로

보다 쉽게 관리하고자 나온 라이브러리다.

> react+dux가 아니다.

어, 아까 React에도 Hooks와 Context로 지역과 전역의 상태를 관리한다고 했는데

또 다른 라이브러리가 필요한가?

결론부터 말하면 필요없다. 대안도 있다.

> constate, recoil 라이브러리는 전역상태를 관리하는 context가 많아짐에
> 따라서 번거로운 부분을 해소하기 위해 등장했다.

그럼 언제써야하는가?

1. SPA로는 부족해서 SSR을 도입할 때(이 것도 next.js로 해결 가능하다만...)
2. reducer + flux 패턴이 맘에들 때(정말로 좋은 패턴)
3. 외부 사이드이펙트에서 전역상태를 변경할 때(websocket, RN 등)
4. 많이 써서

개인적인 의견으론 2번과 4번이다.

기존 애플리케이션은 MVC와 양방향 바인딩 구조를 갖는데,

MVC는 앱이 커지면 슈퍼 빅 울트라 Model을 만들 가능성이 높고

양방향 바인딩은 모델을 업데이트하면 바인딩을 거쳐 다른 모델도 업데이트 하기 때문에 인터렉션을 추적하기 매우 힘든 구조를 갖기 쉽다.

Flux로 단방향 업데이트를 지향하는 것이 좋다고 개인적으론 생각한다.

<br>
또 라이브러리 유지보수 업데이트 입장에선 사람들이 많이쓰고 관심을 많이 갖는 오픈소스는 개선이 빠르게 될 가능성이 높기 때문이다.

그 결과가 아마 Redux toolkit이 아닐까 싶다.

> Redux saga와 observable도 다루고 싶지만 이것도 한 문서따리...

## 3. Typescript

타입스크립트를 쓰는 이유는 간단하게 2가지다.

1. 자바스크립트언어의 단점은 타입이 없어 자료형 유추가 불가능하므로 타입을 통한 코드 안정성 확보.

2. 컴파일 타임에서 타입 유추를 통한 에러 검출 (역시 안정성 확보)

기술적 이유는 짧게 2가지로 줄였다.

개인적인 이유는 개발환경적 이유와 내 공부방향 때문이다.

개발환경 대세인 vscode와 typescript를 microsoft가 주도하고

browser 개발환경이 대부분 vscode로 개발됨에 따라서 vscode는

Typescript를 개발하기에 매우매우 편한환경으로 개선 중이다.

내 공부방향은 현대 웹앱를 모두 JS stack으로 만들 수 있게 되면서 좀 더

안정성있는 앱을 만들고 싶어 Typescript를 선택했고,

백엔드 단의 Node.JS 런타임을 개선한 Deno가 출시되면서 필수가 아닌가 하는

고민이 들었다. Deno는 node의 보안문제와 promise 콜백을 해결하고자 나왔다.

또한 타입스크립트 네이티브다.(Rust는 덤, Ownership 짱짱맨...)

[타입스크립트 vscode 가이드](https://code.visualstudio.com/api/advanced-topics/tslint-eslint-migration)

[Node.js의 후회를 바탕으로 만들어진 Deno](https://www.youtube.com/watch?v=M3BM9TB-8yA&ab_channel=JSConf)

- tslint (x), eslint (o)
-
